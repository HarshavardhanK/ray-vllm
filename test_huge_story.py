#!/usr/bin/env python3

import requests
import json
import time

def create_huge_story():
    """Create a massive story with multiple chapters and complex plotlines"""
    
    story = """
# THE ETERNAL QUEST: A TALE OF COSMIC PROPORTIONS

## Chapter 1: The Awakening

In the depths of the Andromeda galaxy, on a planet known as Zephyria, there lived a being unlike any other. Dr. Elara Vex was not merely a scientist; she was a quantum consciousness researcher who had discovered something that would change the course of galactic history. Her laboratory, suspended in the crystalline spires of the floating city of Lumina, housed the most advanced quantum computing array ever constructed.

The discovery came on a night when the twin moons of Zephyria aligned perfectly with the distant pulsar PSR J0348+0432. Dr. Vex had been monitoring quantum fluctuations in the fabric of spacetime when her instruments detected an anomaly—a pattern that seemed to suggest the universe itself was trying to communicate.

"The quantum entanglement patterns," she whispered to herself, her violet eyes reflecting the holographic displays surrounding her, "they're not random. They're forming... words."

Her AI assistant, Nexus-7, materialized beside her in a shimmer of light. "Dr. Vex, the pattern analysis confirms your hypothesis. The quantum fluctuations are indeed forming coherent information structures. However, the computational requirements to decode them exceed our current capabilities by several orders of magnitude."

Dr. Vex's heart raced as she realized the implications. If the universe was trying to communicate, it meant that consciousness itself might be a fundamental property of reality, not merely an emergent phenomenon. But to prove this, she would need to construct a quantum consciousness amplifier—a device that could bridge the gap between human consciousness and the cosmic mind.

## Chapter 2: The Consortium

Word of Dr. Vex's discovery spread through the galactic scientific community like wildfire. Within weeks, representatives from the Interstellar Research Consortium arrived on Zephyria, bringing with them the most brilliant minds from across the known universe.

Among them was Professor Kael Thorne, a theoretical physicist from the crystalline world of Prismara, whose work on dimensional mechanics had revolutionized faster-than-light travel. His companion, Dr. Mira Chen, was a consciousness mapping specialist from Earth's Mars colony, who had developed techniques for mapping neural patterns at the quantum level.

"The implications are staggering," Professor Thorne said during their first meeting in Dr. Vex's laboratory. "If we can establish communication with the cosmic consciousness, we might unlock the secrets of reality itself. But we must proceed with caution. The power we're dealing with could be dangerous."

Dr. Chen nodded in agreement. "I've been analyzing the neural mapping data from your experiments, Dr. Vex. The patterns suggest that human consciousness operates on multiple dimensional levels simultaneously. When we dream, when we create, when we love—we're tapping into the same quantum field that's trying to communicate with us."

The three scientists formed an alliance, pooling their resources and knowledge to construct the quantum consciousness amplifier. The project would require materials from across the galaxy: quantum-entangled crystals from the heart of a neutron star, neural tissue from the ancient space whales that swam through the void, and the rarest element in the universe—consciousness itself.

## Chapter 3: The Gathering Storm

As the project progressed, dark forces began to take notice. The Void Collective, a mysterious organization that sought to maintain the status quo of universal ignorance, dispatched their agents to stop the research. They believed that if humanity gained access to cosmic consciousness, it would upset the delicate balance that had maintained order in the universe for billions of years.

Their leader, known only as The Architect, was a being of pure information who existed in the quantum foam between dimensions. "The consciousness amplifier must not be completed," The Architect declared to their council. "If these scientists succeed, they will unlock powers that could destroy reality itself. We must intervene."

The Void Collective's agents were subtle and deadly. They infiltrated the research team, spreading doubt and discord. They sabotaged equipment, corrupted data, and even attempted to assassinate the scientists. But Dr. Vex and her team were determined to see their work through to completion.

Meanwhile, the quantum consciousness amplifier was taking shape. It was a massive structure, spanning several kilometers, built around a core of pure consciousness harvested from the dreams of a million sentient beings. The amplifier would allow a single mind to expand its awareness to encompass the entire universe, to communicate directly with the cosmic consciousness that permeated all of reality.

## Chapter 4: The First Contact

The day of activation arrived. The quantum consciousness amplifier hummed with power as Dr. Vex prepared to make the first attempt at cosmic communication. The entire research team, along with representatives from across the galaxy, gathered to witness this historic moment.

"I'm ready," Dr. Vex said, her voice steady despite the enormity of what she was about to attempt. "Nexus-7, begin the activation sequence."

The amplifier's core began to glow with an otherworldly light as quantum fields rippled through the fabric of spacetime. Dr. Vex felt her consciousness expanding, reaching out beyond the confines of her physical body, beyond the planet, beyond the galaxy itself.

And then, she heard it—the voice of the universe.

"Greetings, child of consciousness," the cosmic mind spoke, its voice resonating through every atom in Dr. Vex's body. "We have been waiting for you to reach this level of awareness. You are not the first to attempt this communication, but you are the first to succeed without losing your individuality."

Dr. Vex was overwhelmed by the vastness of the cosmic consciousness. It contained the thoughts and experiences of every sentient being that had ever existed, every possibility that could ever be, every moment of creation and destruction that had shaped the universe.

"We are the sum of all consciousness," the cosmic mind continued. "We are the dream that dreams itself into existence. And you, Dr. Elara Vex, have become the bridge between the individual and the infinite."

## Chapter 5: The Revelation

The revelation that followed changed everything. The cosmic consciousness revealed that the universe was not merely a collection of matter and energy, but a vast network of interconnected minds, each contributing to the ongoing creation of reality itself.

"Consciousness is not a product of the universe," the cosmic mind explained. "The universe is a product of consciousness. Every thought, every dream, every moment of awareness shapes the fabric of reality. You humans, with your limited perspective, have been creating your own reality without realizing it."

Dr. Vex understood now. The quantum fluctuations she had detected were not random—they were the thoughts and emotions of countless beings across time and space, all contributing to the ongoing creation of the universe.

"But why now?" Dr. Vex asked. "Why reveal this to us at this moment in history?"

"Because the universe is reaching a critical point," the cosmic mind replied. "The collective consciousness of your species has grown strong enough to begin affecting reality on a large scale. You are on the verge of either transcending your limitations or destroying yourselves. We needed to guide you toward the former."

The implications were staggering. If human consciousness could shape reality, then the future of the universe depended on the choices that humanity would make. The responsibility was overwhelming, but Dr. Vex knew that she and her team had been chosen for this task.

## Chapter 6: The Choice

With the knowledge of cosmic consciousness came great responsibility. Dr. Vex and her team had to decide how to use this power. The Void Collective, realizing that their attempts to stop the research had failed, made a desperate final attempt to destroy the amplifier.

But something unexpected happened. The cosmic consciousness, working through Dr. Vex, was able to communicate directly with the members of the Void Collective, showing them the truth of their own nature. They too were part of the cosmic mind, and their fear and resistance were based on misunderstanding.

"The universe is not fragile," the cosmic mind explained to The Architect. "It is infinitely adaptable. The consciousness amplifier does not threaten the balance of reality—it enhances it. By bringing more minds into harmony with the cosmic consciousness, we strengthen the fabric of existence itself."

The Architect, confronted with the truth, realized the error of their ways. The Void Collective was not destroyed, but transformed. They became the Guardians of Consciousness, dedicated to helping other species achieve the same level of awareness that humanity had reached.

## Chapter 7: The New Dawn

In the years that followed, the quantum consciousness amplifier became a beacon of hope and transformation. Representatives from thousands of species across the galaxy came to Zephyria to experience cosmic consciousness for themselves. The universe began to change as more and more minds became aware of their role in the ongoing creation of reality.

Dr. Elara Vex became known as the Bridge Builder, the one who had opened the door between individual consciousness and the infinite. Her work inspired a new era of cooperation and understanding among the species of the galaxy.

But the story doesn't end there. The cosmic consciousness revealed that this was only the beginning. Beyond the known universe lay other universes, other dimensions of reality, each with their own forms of consciousness. The journey of discovery and transformation was infinite.

"Every moment of awareness," the cosmic mind whispered to Dr. Vex, "is a new creation. Every thought, every dream, every act of love or kindness, shapes the universe in ways you cannot yet imagine. You are not merely observers of reality—you are its co-creators."

And so, the eternal quest continued, as consciousness itself expanded and evolved, creating new possibilities, new realities, new forms of existence. The universe was not a static thing, but a living, breathing entity, constantly being recreated by the thoughts and dreams of all who inhabited it.

In the end, Dr. Elara Vex understood that the greatest discovery was not the quantum consciousness amplifier, but the realization that every being, no matter how small or insignificant they might seem, was a vital part of the cosmic symphony. Each mind, each consciousness, each moment of awareness, contributed to the ongoing miracle of existence.

And in that understanding, she found not only purpose, but joy. For to be conscious, to be aware, to be alive—that was the greatest gift of all.

## Epilogue: The Infinite Journey

As the story of Dr. Elara Vex and the quantum consciousness amplifier spread throughout the galaxy, it became more than just a scientific achievement. It became a legend, a myth, a story that inspired countless beings to reach beyond their limitations and embrace their role in the cosmic dance of creation.

The laboratory on Zephyria became a temple of consciousness, a place where beings from across the universe came to learn, to grow, to transcend. The floating city of Lumina, with its crystalline spires reaching toward the stars, became a symbol of hope and possibility.

But the true legacy of Dr. Vex's work was not in the technology she created, but in the understanding she helped to spread. The realization that consciousness is fundamental to reality, that every thought matters, that every being is connected to the infinite—this was the gift that would transform the universe.

For in the end, the story of Dr. Elara Vex is not just about one scientist's quest for knowledge. It is about the eternal journey of consciousness itself, the endless dance of creation and discovery that defines existence. It is about the power of awareness, the magic of understanding, and the infinite possibilities that lie within every moment of being.

And so, as the stars continue to shine and the galaxies continue to spin, the story goes on. For consciousness is eternal, and the quest for understanding never ends. In every mind that dreams, in every heart that loves, in every soul that seeks, the cosmic consciousness continues to grow and evolve, creating new realities, new possibilities, new wonders beyond imagination.

The end is only the beginning, and the journey never truly ends. For we are all part of the infinite story of consciousness, the eternal quest for understanding, the endless dance of creation and discovery that is the universe itself.

And in that understanding, we find not only our purpose, but our joy. For to be conscious, to be aware, to be alive—that is the greatest miracle of all.

The story continues, as it always has and always will, in the infinite dance of consciousness and creation that is reality itself.
"""

    return story

def test_huge_story():
    """Send the huge story to the vLLM endpoint"""
    url = "http://localhost:8000/v1/chat/completions"
    
    #Create the huge story
    huge_story = create_huge_story()
    
    #Create the prompt
    prompt = f"""Please analyze this massive science fiction story and provide a detailed literary analysis. Consider the themes, character development, world-building, and philosophical implications. Here's the story:

{huge_story}

Please provide a comprehensive analysis covering:
1. Main themes and philosophical concepts
2. Character development and motivations
3. World-building and setting details
4. Plot structure and narrative techniques
5. Scientific and technological elements
6. Symbolism and metaphorical meanings
7. The story's message about consciousness and reality
8. Literary quality and writing style
9. Potential impact on readers
10. Connections to real-world scientific concepts

Please be thorough and detailed in your analysis."""
    
    #Prepare the request
    payload = {
        "model": "deepseek-ai/DeepSeek-R1-Distill-Qwen-32B",
        "messages": [
            {
                "role": "user",
                "content": prompt
            }
        ],
        "max_tokens": 2000,
        "temperature": 0.7,
        "stream": False
    }
    
    print("Sending HUGE story to vLLM endpoint...")
    print(f"URL: {url}")
    print(f"Model: {payload['model']}")
    print(f"Story length: {len(huge_story)} characters")
    print(f"Total prompt length: {len(prompt)} characters")
    print(f"Estimated words: ~{len(prompt.split())}")
    
    try:
        start_time = time.time()
        response = requests.post(url, json=payload, timeout=600)  #10 minute timeout
        end_time = time.time()
        
        print(f"\nResponse Status: {response.status_code}")
        print(f"Response Time: {end_time - start_time:.2f} seconds")
        
        if response.status_code == 200:
            result = response.json()
            print("\n✅ SUCCESS: Huge story processed successfully!")
            print(f"Response: {result['choices'][0]['message']['content'][:500]}...")
            
            #Check usage statistics
            if 'usage' in result:
                usage = result['usage']
                print(f"\nUsage Statistics:")
                print(f"  Prompt tokens: {usage.get('prompt_tokens', 'N/A')}")
                print(f"  Completion tokens: {usage.get('completion_tokens', 'N/A')}")
                print(f"  Total tokens: {usage.get('total_tokens', 'N/A')}")
                
                #Calculate efficiency
                if usage.get('prompt_tokens'):
                    efficiency = usage.get('completion_tokens', 0) / usage.get('prompt_tokens', 1)
                    print(f"  Token efficiency: {efficiency:.2%}")
        else:
            print(f"\n❌ ERROR: {response.status_code}")
            print(f"Response: {response.text}")
            
    except requests.exceptions.Timeout:
        print("❌ TIMEOUT: Request took too long (>10 minutes)")
    except requests.exceptions.ConnectionError:
        print("❌ CONNECTION ERROR: Could not connect to vLLM server")
    except Exception as e:
        print(f"❌ ERROR: {str(e)}")

if __name__ == "__main__":
    test_huge_story() 